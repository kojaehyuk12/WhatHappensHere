<!DOCTYPE HTML>
<html>
<head>
	<title>Sign up</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/signup.css" />
</head>
<body class="is-preload">

<!-- Header -->
<header id="header">
	<h1>Sign Up</h1>
	<p>If you're not a member, Sign Up!<br />
		if you have an account, Login!</p>
</header>

<!-- Signup Form -->
<form id="signup-form">
	<input type="email" name="email" id="email" placeholder="Email Address" required />
	<input type="password" name="password" id="password" placeholder="Password" required />
	<input type="submit" value="Sign Up" />
</form>

<!-- Footer -->
<footer id="footer">
	<ul class="icons">
		<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
		<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
		<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
		<li><a href="#" class="icon fa-envelope"><span class="label">Email</span></a></li>
	</ul>
	<ul class="copyright">
		<li>&copy; Untitled.</li><li>Credits: <a href="http://html5up.net">ICE</a></li>
	</ul>
</footer>

<!-- JavaScript to handle form submission -->
<script>
	document.getElementById('signup-form').addEventListener('submit', async (e) => {
		e.preventDefault(); // 폼 제출 시 페이지 새로고침 방지

		const email = document.getElementById('email').value;
		const password = document.getElementById('password').value;
		const userData = {
			username: email, // 이메일을 username으로 사용
			password: password,
			email: email
		};

		try {
			const response = await fetch('/api/users/register', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(userData)
			});

			if (response.ok) {
				alert('회원가입 성공');
				window.location.href = "/login.html"; // 성공 시 로그인 페이지로 리디렉션
			} else {
				const errorText = await response.text();
				alert('회원가입 실패: ' + errorText);
			}
		} catch (error) {
			alert('에러 발생: ' + error.message);
		}
	});
</script>

<!-- Scripts -->
<script src="assets/js/main.js"></script>

</body>
</html>
